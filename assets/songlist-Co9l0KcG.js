import{_ as S,a0 as x,x as b,a as d,c as u,o as m,b as n,F as D,q as B,d as a,w as o,a1 as _,u as L,a2 as V,v as f,j as F,n as M,h as T,g as y}from"./index-OxonDnP-.js";const E=""+new URL("songlist-DyB1o7bw.jpg",import.meta.url).href,z={components:{MoreFilled:b,Plus:x},data(){return{selectedPlaylist:"1",editingPlaylist:null,playlists:[{id:"1",name:"休闲娱乐"},{id:"2",name:"最近播放"},{id:"3",name:"收藏歌单"},{id:"4",name:"学习专注"}],allSongs:{1:[{id:1,songName:"Song 1",artist:"Artist 1",src:"@/assets/songs/周杰伦-蒲公英的约定.mp3"},{id:2,songName:"富士山下",artist:"陈奕迅",src:"@/assets/songs/陈奕迅-富士山下.mp3"},{id:3,songName:"红蔷薇白玫瑰",artist:"邓紫棋",src:"@/assets/songs/邓紫棋-红蔷薇白玫瑰.mp3"},{id:4,songName:"唯一",artist:"邓紫棋",src:"@/assets/songs/邓紫棋-唯一.mp3"},{id:5,songName:"特别的人",artist:"方大同",src:"@/assets/songs/方大同-特别的人.mp3"},{id:6,songName:"忘记时间",artist:"胡歌",src:"@/assets/songs/胡歌-忘记时间.mp3"},{id:7,songName:"烟火里的尘埃",artist:"黄霄雲",src:"@/assets/songs/黄霄雲-烟火里的尘埃.mp3"},{id:8,songName:"裹着心的光",artist:"林俊杰",src:"@/assets/songs/林俊杰-裹着心的光.mp3"},{id:9,songName:"交换余生",artist:"林俊杰",src:"@/assets/songs/林俊杰-交换余生.mp3"},{id:10,songName:"输了你赢了世界又如何",artist:"林俊杰",src:"@/assets/songs/林俊杰-输了你赢了世界又如何.mp3"},{id:11,songName:"爱我还是他",artist:"陶喆",src:"@/assets/songs/陶喆-爱我还是他.mp3"},{id:12,songName:"天天",artist:"陶喆",src:"@/assets/songs/陶喆-天天.mp3"},{id:13,songName:"爱错",artist:"王力宏",src:"@/assets/songs/王力宏-爱错.mp3"},{id:14,songName:"重生之我在异乡为异",artist:"王睿卓",src:"@/assets/songs/王睿卓-重生之我在异乡为异.mp3"},{id:15,songName:"瞬",artist:"郑润泽",src:"@/assets/songs/郑润泽-瞬.mp3"}],2:[{id:17,songName:"Song 4",artist:"Artist 4"},{id:18,songName:"Song 5",artist:"Artist 5"}],3:[],4:[]},newPlaylistCounter:1}},setup(){const t=L();return{goToSongListDetail:e=>{t.push({name:"SongListDetail",params:{playlistId:e}})}}},methods:{addPlaylist(){if(this.newPlaylistCounter>100){_.warning("最多只能创建100个新建歌单");return}const t=`playlist_${Date.now()}`,s=`新建歌单${this.newPlaylistCounter}`,e={id:t,name:s};this.playlists.push(e),this.allSongs[t]=[],this.selectedPlaylist=t,this.updateNewPlaylistCounter()},updateNewPlaylistCounter(){const t=this.playlists.map(e=>e.name).filter(e=>e.startsWith("新建歌单")).map(e=>parseInt(e.replace("新建歌单",""))||0).filter(e=>!isNaN(e));let s=1;for(;t.includes(s)&&s<=100;)s++;this.newPlaylistCounter=s},deletePlaylist(t){var g;if(this.playlists.length<=1)return;const s=this.playlists.find(i=>i.id===t);if(!s)return;delete this.allSongs[t];const e=(g=this.playlists.find(i=>i.id!==t))==null?void 0:g.id;this.selectedPlaylist=e||(this.playlists.length>0?this.playlists[0].id:null),this.playlists=this.playlists.filter(i=>i.id!==s.id),this.updateNewPlaylistCounter()},handlePlaylistCommand(t,s){switch(s){case"rename":this.startEditingPlaylist(t);break;case"delete":this.deletePlaylist(t);break}},startEditingPlaylist(t){const s=this.playlists.find(e=>e.id===t);s&&(this.editingPlaylist={...s})},savePlaylistName(){if(!this.editingPlaylist)return;if(!this.editingPlaylist.name.trim()){_.warning("歌单名称不能为空");return}const t=this.playlists.findIndex(s=>s.id===this.editingPlaylist.id);t!==-1&&(this.playlists[t].name=this.editingPlaylist.name,this.editingPlaylist.name.startsWith("新建歌单")&&this.updateNewPlaylistCounter()),this.editingPlaylist=null}},created(){this.updateNewPlaylistCounter()}},A={class:"song-list-container"},K={class:"playlist-grid"},j=["onClick"],I={class:"playlist-count"},R={class:"playlist-info"},U={key:0},W={class:"playlist-actions"};function q(t,s,e,g,i,r){const N=d("el-input"),w=d("MoreFilled"),h=d("el-icon"),c=d("el-dropdown-item"),C=d("el-dropdown-menu"),v=d("el-dropdown"),k=d("Plus");return m(),u("div",A,[s[8]||(s[8]=n("h2",{class:"main-title"},"我的歌单",-1)),n("div",K,[(m(!0),u(D,null,B(i.playlists,l=>{var P;return m(),u("div",{key:l.id,class:V(["playlist-card",{active:i.selectedPlaylist===l.id}])},[n("div",{class:"playlist-cover",onClick:p=>g.goToSongListDetail(l.id)},[s[3]||(s[3]=n("img",{src:E,alt:"歌单封面"},null,-1)),n("div",I,f(((P=i.allSongs[l.id])==null?void 0:P.length)||0)+"首 ",1)],8,j),n("div",R,[!i.editingPlaylist||i.editingPlaylist.id!==l.id?(m(),u("h3",U,f(l.name),1)):(m(),F(N,{key:1,modelValue:i.editingPlaylist.name,"onUpdate:modelValue":s[0]||(s[0]=p=>i.editingPlaylist.name=p),onKeyup:M(r.savePlaylistName,["enter"]),onBlur:r.savePlaylistName,size:"small",autofocus:""},null,8,["modelValue","onKeyup","onBlur"])),n("div",W,[a(v,{trigger:"click",onCommand:p=>r.handlePlaylistCommand(l.id,p)},{dropdown:o(()=>[a(C,null,{default:o(()=>[a(c,{command:"rename"},{default:o(()=>s[4]||(s[4]=[y("重命名")])),_:1}),a(c,{command:"play"},{default:o(()=>s[5]||(s[5]=[y("播放")])),_:1}),a(c,{command:"delete",disabled:i.playlists.length<=1},{default:o(()=>s[6]||(s[6]=[y("删除")])),_:1},8,["disabled"])]),_:1})]),default:o(()=>[a(h,{onClick:s[1]||(s[1]=T(()=>{},["stop"]))},{default:o(()=>[a(w)]),_:1})]),_:2},1032,["onCommand"])])])],2)}),128)),n("div",{class:"add-playlist-card",onClick:s[2]||(s[2]=(...l)=>r.addPlaylist&&r.addPlaylist(...l))},[a(h,{size:40},{default:o(()=>[a(k)]),_:1}),s[7]||(s[7]=n("span",null,"添加歌单",-1))])])])}const H=S(z,[["render",q],["__scopeId","data-v-8c9833af"]]);export{H as default};
